# Static Site Generation

Static pre-rendering generates HTML pages at build time, which means that the pages are generated once during the build process and then served as static files to the clients. This approach is suitable for pages that do not require frequent data updates and can be cached for faster subsequent requests. When a user requests a pre-rendered page, the server serves the static HTML directly, without executing any JavaScript code on the client-side.

Static pre-rendering is beneficial for performance because it allows the content to be served from a CDN (Content Delivery Network) rather than generating it on each request. It provides fast initial page loads and good SEO, as search engines can easily index the static HTML pages. Next.js provides a data fetching method, `getStaticProps`, which allows you to fetch data at build time and include it in the pre-rendered page.

## `getStaticProps`

If you export a function called `getStaticProps` _(Static Site Generation)_ from a page, Next.js will pre-render this page at build time using the props returned by `getStaticProps`.

### **When should I use `getStaticProps`?**

- The data required to render the page is available at build time ahead of a user’s request
- The data comes from a headless CMS
- The page must be pre-rendered (for SEO) and be very fast — `getStaticProps` generates HTML and JSON files, both of which can be cached by a CDN for performance
- The data can be publicly cached (not user-specific). This condition can be bypassed in certain specific situation by using a Middleware to rewrite the path.

### **When does `getStaticProps` run?**

- It always runs on the server and never on the client.
- It always runs during `next build`
- As `getStaticProps` runs only on the server-side, it will never run on the client-side. It won’t even be included in the JS bundle for the browser, so you can write direct database queries without them being sent to browsers.

### **Statically generates both HTML and JSON**

When a page with `getStaticProps` is pre-rendered at build time, in addition to the page HTML file, Next.js generates a JSON file holding the result of running `getStaticProps`.

This JSON file will be used in client-side routing through `next/link` or `next/router`. When you navigate to a page that’s pre-rendered using `getStaticProps`, Next.js fetches this JSON file (pre-computed at build time) and uses it as the props for the page component. This means that client-side page transitions will not call `getStaticProps` as only the exported JSON is used.

### **Where can I use `getStaticProps`?**

getStaticProps can only be exported from a page. You cannot export it from non-page files, \_app, \_document, or \_error.

# Dynamic Static Site Generation

If a page has Dynamic Routes and uses `getStaticProps`, it needs to define a list of paths to be statically generated.

When you export a function called `getStaticPaths` (Static Site Generation) from a page that uses dynamic routes, Next.js will statically pre-render all the paths specified by `getStaticPaths`.

## `getStaticPaths`

`fallback` property returned from `getStaticPaths` is used to define the behavior of a page that isn't pre-rendered at build time. This property can be set to true to show a fallback page while the page is being generated, `false` to show a 404 page, or `blocking` to generate the page at request time.

    export async function getStaticPaths() {
      return {
        paths: [],
        fallback: 'blocking'
      };
    }

In the app directory, `getStaticPaths` is replaced with `generateStaticParams`.

`generateStaticParams` behaves similarly to getStaticPaths, but has a simplified API for returning route parameters and can be used inside layouts. The return shape of `generateStaticParams` is an array of segments instead of an array of nested `param` objects or a string of resolved paths.
